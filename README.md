# نظام إدارة المهام

نظام متكامل لإدارة المهام والمشاريع مع دعم للغة العربية.

## المميزات الرئيسية

- إدارة المهام والمشاريع
- تصنيف المهام حسب الحالة والقسم
- دعم الملاحظات النصية والروابط والصور
- محرر نص متقدم للملاحظات مع دعم التنسيق
- تكبير الصور في نافذة منبثقة
- تصدير واستيراد البيانات
- واجهة مستخدم عربية سهلة الاستخدام

## التثبيت

1. قم بنسخ الملفات إلى مجلد الخادم الخاص بك
2. تأكد من أن الخادم يدعم PHP
3. افتح التطبيق في المتصفح

## التعديلات الأخيرة

### إضافة محرر نص متقدم للملاحظات
- تاريخ التعديل: [التاريخ الحالي]
- الملفات المعدلة: index.php
- التغييرات:
  - إضافة محرر TinyMCE للملاحظات النصية
  - دعم التنسيق المتقدم (نصوص، روابط، صور)
  - تحسين عرض الملاحظات مع الحفاظ على التنسيق
  - إضافة دعم للغة العربية في المحرر
  - تحسين واجهة المستخدم للمحرر

## التوثيق التقني

### الدوال الرئيسية

#### initTinyMCE()
- الوصف: تهيئة محرر TinyMCE
- المدخلات: لا يوجد
- المخرجات: لا يوجد
- مثال:
```javascript
initTinyMCE();
```

#### updateNoteInputType()
- الوصف: تحديث نوع حقل الإدخال حسب نوع الملاحظة
- المدخلات: لا يوجد
- المخرجات: لا يوجد
- مثال:
```javascript
updateNoteInputType();
```

#### handleImagePaste(e)
- الوصف: معالجة لصق الصور
- المدخلات: 
  - e (ClipboardEvent): حدث اللصق
- المخرجات: لا يوجد
- مثال:
```javascript
input.addEventListener('paste', handleImagePaste);
```

#### handleImageInput(e)
- الوصف: معالجة تغيير قيمة حقل الصورة
- المدخلات:
  - e (Event): حدث التغيير
- المخرجات: لا يوجد
- مثال:
```javascript
input.addEventListener('input', handleImageInput);
```

#### renderTaskNotes()
- الوصف: عرض ملاحظات المهمة
- المدخلات: لا يوجد
- المخرجات: لا يوجد
- مثال:
```javascript
renderTaskNotes();
```

#### addTaskNote(e)
- الوصف: إضافة ملاحظة جديدة للمهمة
- المدخلات:
  - e (Event): حدث النموذج
- المخرجات: boolean
- مثال:
```javascript
form.onsubmit = addTaskNote;
```

### التبعيات
- Tailwind CSS: لتنسيق الواجهة
- Font Awesome: للأيقونات
- Chart.js: لعرض الإحصائيات
- SortableJS: لدعم السحب والإفلات
- TinyMCE: محرر النصوص المتقدم

## تدفق البيانات

1. عند إضافة ملاحظة نصية:
   - يتم تهيئة محرر TinyMCE
   - يمكن للمستخدم تنسيق النص
   - يتم حفظ النص مع التنسيق

2. عند إضافة صورة:
   - يمكن لصق الصورة مباشرة (Ctrl+V)
   - يتم تحويل الصورة إلى base64
   - يتم عرض معاينة للصورة

3. عند عرض الملاحظات:
   - يتم عرض النصوص مع التنسيق
   - يمكن تكبير الصور بالنقر عليها
   - يمكن حذف أي ملاحظة

## نقاط قابلة للتحسين

1. إضافة دعم لتحميل الصور من الملفات
2. إضافة دعم للمزيد من أنواع التنسيق
3. تحسين أداء المحرر مع النصوص الطويلة
4. إضافة خيارات تخصيص للمحرر
5. دعم حفظ المسودات

## سجل الأخطاء

### error_log.txt
```
[التاريخ] - تم إضافة محرر نص متقدم
- الملف: index.php
- التغييرات:
  * إضافة TinyMCE للملاحظات النصية
  * تحسين معالجة الصور
  * تحسين عرض الملاحظات
  * إضافة دعم اللغة العربية
```
